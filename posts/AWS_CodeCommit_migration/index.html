<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="AWS CodeCommit으로 Git repo 옮기기" /><meta property="og:locale" content="en" /><meta name="description" content="기존에 사용하던 Git repository를 AWS CodeCommit으로 옮기고 credential helper를 이용해서 remote에 연결하는 과정을 정리하였습니다." /><meta property="og:description" content="기존에 사용하던 Git repository를 AWS CodeCommit으로 옮기고 credential helper를 이용해서 remote에 연결하는 과정을 정리하였습니다." /><link rel="canonical" href="https://junyeopp.github.io/posts/AWS_CodeCommit_migration/" /><meta property="og:url" content="https://junyeopp.github.io/posts/AWS_CodeCommit_migration/" /><meta property="og:site_name" content="Try Everything" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-18T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS CodeCommit으로 Git repo 옮기기" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-18T00:00:00+09:00","datePublished":"2022-01-18T00:00:00+09:00","description":"기존에 사용하던 Git repository를 AWS CodeCommit으로 옮기고 credential helper를 이용해서 remote에 연결하는 과정을 정리하였습니다.","headline":"AWS CodeCommit으로 Git repo 옮기기","mainEntityOfPage":{"@type":"WebPage","@id":"https://junyeopp.github.io/posts/AWS_CodeCommit_migration/"},"url":"https://junyeopp.github.io/posts/AWS_CodeCommit_migration/"}</script><title>AWS CodeCommit으로 Git repo 옮기기 | Try Everything</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Try Everything"><meta name="application-name" content="Try Everything"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">Try Everything</a></div><div class="site-subtitle font-italic">시도하고 기록하기</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/junyeopp" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['junyeop.dev','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS CodeCommit으로 Git repo 옮기기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AWS CodeCommit으로 Git repo 옮기기</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> junyeop </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 18, 2022, 12:00 AM +0900" >Jan 18<i class="unloaded">2022-01-18T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="524 words">2 min read</span></div></div><div class="post-content"><p>기존에 사용하던 Git repository를 AWS CodeCommit으로 옮기고 credential helper를 이용해서 remote에 연결하는 과정을 정리하였습니다.</p><h1 id="1-git-repository를-aws-codecommit으로-옮기기">1. Git repository를 AWS CodeCommit으로 옮기기</h1><p>: <a href="https://docs.aws.amazon.com/codecommit/latest/userguide/how-to-migrate-repository-existing.html">AWS Documentation</a>을 따라가며 작성하였습니다.</p><ol><li>AWS User에게 적절한 권한을 준 뒤, CodeCommit을 위한 HTTPS Git credentials을 생성합니다.<li>CodeCommit 콘솔에서 새로운 repository를 만들어줍니다.<li><p>aws-codecommit-demo이라는 폴더에 bare repo를 생성합니다.</p><p><code class="language-plaintext highlighter-rouge">git clone --mirror ssh://git_repo.git aws-codecommit-demo</code></p><li><p>bare repo 폴더로 이동하여 CodeCommit 콘솔에서 확인한 URL로 bare repo를 push해줍니다.</p><p><code class="language-plaintext highlighter-rouge">cd aws-codecommit-demo</code></p><p><code class="language-plaintext highlighter-rouge">git push https://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/&lt;new_repo&gt; --all</code></p><p><code class="language-plaintext highlighter-rouge">git push https://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/&lt;new_repo&gt; --tags</code></p><ul><li><code class="language-plaintext highlighter-rouge">--all</code> 옵션을 통해 모든 브랜치를 push할 수 있습니다. 하지만 tags는 push되지 않기 때문에 <code class="language-plaintext highlighter-rouge">--tags</code> 옵션을 통해 한 번 더 push해줍니다.</ul><li>위에서 생성한 aws-codecommit-demo이라는 폴더는 더 이상 필요하지 않기에 삭제해줍니다.<li>끝!</ol><h1 id="2-git-credential-helper-설정하기">2. Git credential helper 설정하기</h1><p>credential helper는 HTTP 프로토콜을 사용해서 remote repo에 접근할 때 매번 인증을 거치지 않게 해주는 시스템입니다. git에서는 기본적으로 cache, store, wincred와 같은 옵션을 제공하고 자세한 내용은 <a href="https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-Credential-%EC%A0%80%EC%9E%A5%EC%86%8C">여기</a>서 확인할 수 있습니다.</p><p>AWS CLI에서는 HTTPS를 통한 CodeCommit 접근을 위해 CLI config의 정보를 이용할 수 있게 해주는 credential helper를 제공합니다. helper를 설정하는 방법은 <a href="https://docs.aws.amazon.com/codecommit/latest/userguide/setting-up-https-windows.html">document</a>에 제시되어있습니다.</p><p>저는 기본값으로 설정시 403에러가 발생해서 아래와 같이 .gitconfig파일을 직접 수정해주었습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span text-data=" Plaintext "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>[credential "https://git-codecommit.ap-northeast-2.amazonaws.com"]
	helper = !aws codecommit credential-helper --profile carvi $@
	UseHttpPath = true

[credential]
	helper = wincred
</pre></table></code></div></div><h1 id="3-새로-생성한-codecommit-repo를-remote로-추가하기">3. 새로 생성한 CodeCommit repo를 remote로 추가하기</h1><ol><li><p>upstream추가에 앞서 지금 등록된 remote 목록을 확인해봅니다.</p><p><code class="language-plaintext highlighter-rouge">git remote -v</code></p><li><p>CodeCommit repo 주소를 remote에 “upstream”이름으로 등록합니다.</p><p><code class="language-plaintext highlighter-rouge">git remote add upstream https://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/&lt;new_repo&gt;</code></p><li><p>끝!</p></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/aws/'>AWS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/dev/" class="post-tag no-text-decoration" >dev</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS CodeCommit으로 Git repo 옮기기 - Try Everything&url=https://junyeopp.github.io/posts/AWS_CodeCommit_migration/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS CodeCommit으로 Git repo 옮기기 - Try Everything&u=https://junyeopp.github.io/posts/AWS_CodeCommit_migration/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=AWS CodeCommit으로 Git repo 옮기기 - Try Everything&url=https://junyeopp.github.io/posts/AWS_CodeCommit_migration/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/hackerrank_sql/">HackerRank SQL 문제</a><li><a href="/posts/python_for_coding_test_Graph_algorithms/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - 그래프 알고리즘</a><li><a href="/posts/python_for_coding_test_Shortest_path/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - 최단 경로</a><li><a href="/posts/python_for_coding_test_Dynamic_programming/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - 다이나믹 프로그래밍</a><li><a href="/posts/python_for_coding_test_DFS_BFS/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - DFS, BFS</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/db/">DB</a> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/cloudwatch/">CloudWatch</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/mongodb/">MongoDB</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/MongoDB_Replica_Set_reconfig_without_downtime/"><div class="card-body"> <span class="timeago small" >Jan 6<i class="unloaded">2022-01-06T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>downtime없이 MongoDB Replica Set 설정 변경하기</h3><div class="text-muted small"><p> 상황 현재 상황은 docker로 MongoDB가 실행되고 있으며, PSA 구조(Primary 1개, Secondary 1개, Arbiter 1개)의 Replica Set으로 구성되어 있는 상황입니다. 그리고 변경해야하는 사항들은 다음과 같습니다. Replica Set의 host 주소를 IP에서 URI로 변경하기 mongod.conf 파일의...</p></div></div></a></div><div class="card"> <a href="/posts/AWS_cli_S3_sync_speed_up/"><div class="card-body"> <span class="timeago small" >Jan 18<i class="unloaded">2022-01-18T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS CLI - S3 sync 속도 개선하기</h3><div class="text-muted small"><p> AWS CLI의 sync 명령어를 통해서 S3의 데이터를 백업할 때, aws s3 sync s3://$bucket . 의 형태로 버킷단위로 sync를 진행하면 시간이 많이 걸렸습니다. sync를 할 때 파일 전송시간보다 어떤 파일을 옮겨야 할지 찾는데 시간이 더 많이 걸리는 것 같았고 네트워크 대역폭은 널널했었습니다. 이 대역폭을 가득 채우고 싶었습...</p></div></div></a></div><div class="card"> <a href="/posts/CloudWatch_agent/"><div class="card-body"> <span class="timeago small" >Jun 3, 2021<i class="unloaded">2021-06-03T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CloudWatch agent</h3><div class="text-muted small"><p> EC2의 memory 사용량을 모니터링 하기 위해서 CloudWatch agent를 사용 docs: https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/Install-CloudWatch-Agent.html CloudWatchAgentServerPolicy권한을 가...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/BOJ_Greedy/" class="btn btn-outline-primary" prompt="Older"><p>백준 단계별 - 그리디 알고리즘</p></a> <a href="/posts/AWS_cli_S3_sync_speed_up/" class="btn btn-outline-primary" prompt="Newer"><p>AWS CLI - S3 sync 속도 개선하기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/junyeopp">junyeop</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/db/">DB</a> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/cloudwatch/">CloudWatch</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/mongodb/">MongoDB</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
