<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="MongoDB &amp; certbot으로 certificateKeyFile 만들기" /><meta property="og:locale" content="en" /><meta name="description" content="MongoDB를 Replica Set 형태로 배포할 때 DB URL에 TLS로 접근할 수 있도록 하려고 합니다." /><meta property="og:description" content="MongoDB를 Replica Set 형태로 배포할 때 DB URL에 TLS로 접근할 수 있도록 하려고 합니다." /><link rel="canonical" href="https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/" /><meta property="og:url" content="https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/" /><meta property="og:site_name" content="Try Everything" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-12T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MongoDB &amp; certbot으로 certificateKeyFile 만들기" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-07T22:56:47+09:00","datePublished":"2021-10-12T00:00:00+09:00","description":"MongoDB를 Replica Set 형태로 배포할 때 DB URL에 TLS로 접근할 수 있도록 하려고 합니다.","headline":"MongoDB &amp; certbot으로 certificateKeyFile 만들기","mainEntityOfPage":{"@type":"WebPage","@id":"https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/"},"url":"https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/"}</script><title>MongoDB & certbot으로 certificateKeyFile 만들기 | Try Everything</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Try Everything"><meta name="application-name" content="Try Everything"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">Try Everything</a></div><div class="site-subtitle font-italic">시도하고 기록하기</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/junyeopp" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['junyeop.dev','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>MongoDB & certbot으로 certificateKeyFile 만들기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MongoDB & certbot으로 certificateKeyFile 만들기</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> junyeop </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Oct 12, 2021, 12:00 AM +0900" >Oct 12, 2021<i class="unloaded">2021-10-12T00:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 7, 2022, 10:56 PM +0900" >Mar 7<i class="unloaded">2022-03-07T22:56:47+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1080 words">6 min read</span></div></div><div class="post-content"><p>MongoDB를 Replica Set 형태로 배포할 때 DB URL에 TLS로 접근할 수 있도록 하려고 합니다.</p><p>다음은 MongoDB Replica Set을 만들때 사용하는 config파일의 tls 설정부분입니다.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span text-data=" YAML "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="na">net</span><span class="pi">:</span>
  <span class="na">port</span><span class="pi">:</span> <span class="s">xxxx</span>
  <span class="na">bindIp</span><span class="pi">:</span> <span class="s">0.0.0.0</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">requireTLS</span>
    <span class="na">certificateKeyFile</span><span class="pi">:</span> <span class="s">/data/mongo.pem</span>
    <span class="na">CAFile</span><span class="pi">:</span> <span class="s">/data/fullca.pem</span>
</pre></table></code></div></div><p>이 부분에 사용할 <code class="language-plaintext highlighter-rouge">mongo.pem</code>파일과 <code class="language-plaintext highlighter-rouge">fullca.pem</code>파일을 만들어보겠습니다.</p><h1 id="certificatekeyfile-만들기">certificateKeyFile 만들기</h1><ol><li><p><a href="https://certbot.eff.org/pages/about">cerbot</a>으로 도메인에 대한 인증서 발급받은 후 생성되는 파일 4개를 확인</p><p>certbot으로 도메인에 대한 인증서를 발급받으면 <code class="language-plaintext highlighter-rouge">cert.pem</code>, <code class="language-plaintext highlighter-rouge">chain.pem</code>, <code class="language-plaintext highlighter-rouge">fullchain.pem</code>, <code class="language-plaintext highlighter-rouge">privkey.pem</code> 4개의 파일이 생성됩니다.</p><ul><li><dl><dt><code class="language-plaintext highlighter-rouge">privkey.pem</code><dd><p>private key 를 가지고 있습니다.</p></dl><li><code class="language-plaintext highlighter-rouge">cert.pem</code><ol><li>cert 1<ul><li>Issuer: C = US, O = Let’s Encrypt, CN = R3<li>Subject: CN = <domain_URL></domain_URL></ul></ol><li><code class="language-plaintext highlighter-rouge">chain.pem</code><ol><li>cert 2<ul><li>Issuer: C = US, O = Internet Security Research Group, CN = ISRG Root X1<li>Subject: C = US, O = Let’s Encrypt, CN = R3</ul><li>cert 3<ul><li>Issuer: O = Digital Signature Trust Co., CN = DST Root CA X3<li>Subject: C = US, O = Internet Security Research Group, CN = ISRG Root X1</ul></ol><li><dl><dt><code class="language-plaintext highlighter-rouge">fullchain.pem</code><dd><p>cert.pem, chain.pem 두 파일을 합쳐놓은 파일입니다.</p></dl></ul><li><p><code class="language-plaintext highlighter-rouge">fullca.pem</code> 만들기</p><p>도메인에서 RootCA까지의 chain을 모두 저장하는 <code class="language-plaintext highlighter-rouge">fullca.pem</code>이라는 파일을 먼저 만들겠습니다.</p><p>DST Root CA X3를 사용할 때에는 <code class="language-plaintext highlighter-rouge">fullchain.pem</code>에 “self-signed” DST Root CA X3 인증서를 추가하여 인증 chain을 완성해서 <code class="language-plaintext highlighter-rouge">fullca.pem</code>을 만들었습니다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre> <span class="c">#!/bin/bash</span>
 <span class="nv">here</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">readlink</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span><span class="p">;</span> <span class="nb">pwd</span><span class="si">)</span>
 <span class="nv">wherekeys</span><span class="o">=</span>/etc/letsencrypt/live/&lt;domain_URL&gt;
 wget <span class="nt">--directory-prefix</span><span class="o">=</span><span class="s2">"</span><span class="nv">$here</span><span class="s2">/../"</span> http://apps.identrust.com/roots/dstrootcax3.p7c
 openssl pkcs7 <span class="nt">-inform</span> der <span class="nt">-in</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../dstrootcax3.p7c"</span> <span class="nt">-out</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../dstrootcax3.pem"</span> <span class="nt">-print_certs</span>
 <span class="nb">cp</span> <span class="s2">"</span><span class="nv">$wherekeys</span><span class="s2">/fullchain.pem"</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span>
 <span class="nb">cat</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../dstrootcax3.pem"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span>
 <span class="nb">cat</span> <span class="s2">"</span><span class="nv">$wherekeys</span><span class="s2">/privkey.pem"</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../mongo.pem"</span>
</pre></table></code></div></div><p>하지만 2021-09-30에 Let’s encrypt에서 DST Root CA X3 사용이 중지됨에 따라 기존 방법으로는 인증이 되지 않았습니다.</p><p><a href="https://junyeopp.github.io/posts/lets_encrypt_expired_root_ca/">Let’s Encrypt의 DST Root CA X3 만료</a></p><p>그래서 <code class="language-plaintext highlighter-rouge">cert.pem</code> + <code class="language-plaintext highlighter-rouge">chain.pem</code>의 cert 2 + <code class="language-plaintext highlighter-rouge">isrgrootx1.pem</code>(self-signed ISRG Root X1 인증서) 를 통해 <code class="language-plaintext highlighter-rouge">fullca.pem</code>을 만들었습니다. (self-signed ISRG Root X1 인증서는 <a href="https://letsencrypt.org/certificates/">https://letsencrypt.org/certificates/</a> 의 <code class="language-plaintext highlighter-rouge">.pem</code> 파일을 이용하였습니다.)</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre> <span class="c">#!/bin/bash</span>
 <span class="nv">here</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">readlink</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span><span class="p">;</span> <span class="nb">pwd</span><span class="si">)</span>
 <span class="nv">wherekeys</span><span class="o">=</span>/etc/letsencrypt/live/&lt;domain_URL&gt;
 wget <span class="nt">-O</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../isrgrootx1.pem"</span> https://letsencrypt.org/certs/isrgrootx1.pem
 <span class="nb">cp</span> <span class="s2">"</span><span class="nv">$wherekeys</span><span class="s2">/cert.pem"</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span>
 <span class="nb">csplit</span> <span class="nt">-s</span> <span class="nt">-z</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../chain-"</span> <span class="s2">"</span><span class="nv">$wherekeys</span><span class="s2">/chain.pem"</span> <span class="s2">"/-----BEGIN CERTIFICATE-----/"</span> <span class="s2">"{*}"</span>
 <span class="nb">cat</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../chain-00"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span>
 <span class="nb">cat</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../isrgrootx1.pem"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span>
 <span class="nb">cat</span> <span class="s2">"</span><span class="nv">$wherekeys</span><span class="s2">/privkey.pem"</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../fullca.pem"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$here</span><span class="s2">/../mongo.pem"</span>

 <span class="nb">rm</span> <span class="nv">$here</span>/../chain-<span class="k">*</span>
</pre></table></code></div></div><p>: 4개의 파일로 <code class="language-plaintext highlighter-rouge">mongo.pem</code>를 생성하는 스크립트입니다.</p><li><dl><dt><code class="language-plaintext highlighter-rouge">fullca.pem</code>이 잘 생성되었는지 확인해보기<dd><p>생성된 <code class="language-plaintext highlighter-rouge">fullca.pem</code>을 통해서 <code class="language-plaintext highlighter-rouge">cert.pem</code>이 인증되는 것을 확인할 수 있습니다.</p></dl><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> openssl verify <span class="nt">-CAfile</span> fullca.pem cert.pem
 -&gt; cert.pem: OK
</pre></table></code></div></div><li><dl><dt><code class="language-plaintext highlighter-rouge">mongo.pem</code> 만들기<dd><p><code class="language-plaintext highlighter-rouge">privkey.pem</code>을 <code class="language-plaintext highlighter-rouge">fullca.pem</code>에 더해 <code class="language-plaintext highlighter-rouge">mongo.pem</code>을 만듭니다.</p></dl></ol><p>이제 생성한 <code class="language-plaintext highlighter-rouge">fullca.pem</code>파일과 <code class="language-plaintext highlighter-rouge">mongo.pem</code>파일을 config파일에서 명시한 위치에 옮겨서 Replica Set을 만드는데 사용할 수 있습니다.</p><h1 id="-참고">+ 참고</h1><h2 id="인증서-갱신">인증서 갱신</h2><p><code class="language-plaintext highlighter-rouge">certbot</code>을 통해 인증서를 발급받으면 기본적으로 <code class="language-plaintext highlighter-rouge">crontab</code>을 이용해 매일 2번 <code class="language-plaintext highlighter-rouge">renew</code>가 실행되며, 만기일이 30일보다 적게 남은 인증서가 업데이트됩니다.</p><h2 id="인증서-확인하기">인증서 확인하기</h2><ul><li><dl><dt><code class="language-plaintext highlighter-rouge">openssl x509 -text -noout -in cert.pem</code><dd><p><code class="language-plaintext highlighter-rouge">cert.pem</code>파일의 Validity, Issuer, Subject 등의 정보를 확인할 수 있습니다.</p></dl><li><dl><dt><code class="language-plaintext highlighter-rouge">openssl verify -CAfile fullca.pem cert.pem</code><dd><p>CAfile의 Chain of trust로 인증서를 인증할 수 있는지 확인할 수 있습니다.</p></dl><li><dl><dt><code class="language-plaintext highlighter-rouge">openssl s_client -connect &lt;Domain URL&gt; 2&gt; /dev/null | openssl x509 -noout -dates</code><dd><p>도메인의 URL로부터 인증서 만기일을 확인할 수 있습니다.</p></dl><li><dl><dt><code class="language-plaintext highlighter-rouge">sudo openssl x509 -dates -noout -in /etc/letsencrypt/live/&lt;Domain URL&gt;/fullchain.pem</code><dd><p><code class="language-plaintext highlighter-rouge">.pem</code>파일로부터 인증서 만기일을 확인할 수 있습니다.</p></dl><li>참고자료<ul><li><a href="https://carpfish.tistory.com/entry/OpenSSL-Lets-Encrypt-%EC%9D%B8%EC%A6%9D%EC%84%9C-Chain-verify-%EB%B0%A9%EB%B2%95">https://carpfish.tistory.com/entry/OpenSSL-Lets-Encrypt-인증서-Chain-verify-방법</a></ul></ul><h2 id="mongodb-shell에서-tls상태-확인하기">MongoDB Shell에서 TLS상태 확인하기</h2><p><a href="https://docs.mongodb.com/manual/reference/command/serverStatus/"><code class="language-plaintext highlighter-rouge">db.serverStatus()</code></a>로 확인할 수 있습니다.</p><ul><li><dl><dt><code class="language-plaintext highlighter-rouge">security.SSLServerHasCertificateAuthority</code><dd><p>false인 경우 CA파일이 제대로 읽어지지 않은 것이므로 Root CA를 포함한 CA chain파일을 넣어주면 됩니다.</p></dl><li><dl><dt><code class="language-plaintext highlighter-rouge">security.SSLServerCertificateExpirationDate</code><dd><p>인증서의 만기일을 확인할 수 있습니다.</p></dl></ul><h2 id="인증서-생성manual">인증서 생성(manual)</h2><ol><li><a href="https://eff-certbot.readthedocs.io/en/stable/using.html?highlight=route53#dns-plugins">dns plugin</a>을 제공하지 않는 곳에서는 <code class="language-plaintext highlighter-rouge">--manual</code>옵션으로 인증서를 생성해야 합니다.<ul><li><code class="language-plaintext highlighter-rouge">certbot certonly --manual --preferred-challenges dns --cert-name CERT-NAME -d DOMAINS</code></ul><li><p>요청된 값을 TXT record에 추가하면 됩니다.</p><p><img data-proofer-ignore data-src="/assets/images/2021-10-12-mongodb_and_certbot_create_pem_manual1.png" alt="manual1" /></p><li><p>정상적으로 등록이 되었다면 아래와 같은 메시지를 확인할 수 있습니다.</p><p><img data-proofer-ignore data-src="/assets/images/2021-10-12-mongodb_and_certbot_create_pem_manual2.png" alt="manual2" /></p><li>메시지 내용처럼 <code class="language-plaintext highlighter-rouge">--manual</code>로 생성한 인증서는 자동으로 renew되지 않습니다.</ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/mongodb/'>MongoDB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >MongoDB</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MongoDB & certbot으로 certificateKeyFile 만들기 - Try Everything&url=https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MongoDB & certbot으로 certificateKeyFile 만들기 - Try Everything&u=https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=MongoDB & certbot으로 certificateKeyFile 만들기 - Try Everything&url=https://junyeopp.github.io/posts/mongodb_and_certbot_create_pem/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/hackerrank_sql/">HackerRank SQL 문제</a><li><a href="/posts/python_for_coding_test_Graph_algorithms/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - 그래프 알고리즘</a><li><a href="/posts/python_for_coding_test_Shortest_path/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - 최단 경로</a><li><a href="/posts/python_for_coding_test_Dynamic_programming/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - 다이나믹 프로그래밍</a><li><a href="/posts/python_for_coding_test_DFS_BFS/">이것이 취업을 위한 코딩 테스트다 with 파이썬 - DFS, BFS</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/db/">DB</a> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/cloudwatch/">CloudWatch</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/mongodb/">MongoDB</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/MongoDB_Replica_Set_reconfig_without_downtime/"><div class="card-body"> <span class="timeago small" >Jan 6<i class="unloaded">2022-01-06T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>downtime없이 MongoDB Replica Set 설정 변경하기</h3><div class="text-muted small"><p> 상황 현재 상황은 docker로 MongoDB가 실행되고 있으며, PSA 구조(Primary 1개, Secondary 1개, Arbiter 1개)의 Replica Set으로 구성되어 있는 상황입니다. 그리고 변경해야하는 사항들은 다음과 같습니다. Replica Set의 host 주소를 IP에서 URI로 변경하기 mongod.conf 파일의...</p></div></div></a></div><div class="card"> <a href="/posts/hackerrank_sql/"><div class="card-body"> <span class="timeago small" >Feb 24<i class="unloaded">2022-02-24T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackerRank SQL 문제</h3><div class="text-muted small"><p> SQL Project Planning 1 2 3 4 5 6 7 8 9 10 11 12 13 14 WITH start AS ( SELECT Start_Date, ROW_NUMBER() OVER(ORDER BY Start_Date) AS rn FROM Projects WHERE Start_date NOT in (SELECT End_...</p></div></div></a></div><div class="card"> <a href="/posts/postgresql_and_dbeaver/"><div class="card-body"> <span class="timeago small" >Feb 21<i class="unloaded">2022-02-21T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>PostgreSQL + DBeaver 시작하기</h3><div class="text-muted small"><p> 데이터 분석을 위한 SQL 레시피 실습환경을 설정한 과정을 정리하였습니다. PostgreSQL posgres Docker Image를 받아줍니다. 1 docker pull postgres 이제 컨테이너를 만들어줍니다. 1 docker run --name postgres-demo -e POSTGRES_PASS...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/lets_encrypt_expired_root_ca/" class="btn btn-outline-primary" prompt="Older"><p>Let’s Encrypt의 DST Root CA X3 만료</p></a> <a href="/posts/AWS_lambda_layer/" class="btn btn-outline-primary" prompt="Newer"><p>AWS - Lambda Layer 만들기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/junyeopp">junyeop</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/db/">DB</a> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/cloudwatch/">CloudWatch</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/mongodb/">MongoDB</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
